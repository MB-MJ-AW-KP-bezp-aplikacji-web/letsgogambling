{% extends "base.html" %}
{% load static %}

{% block title %}Casino: Multiplayer Roulette{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/roulette.css' %}">
{% endblock %}

{% block content %}
<div class="roulette-container" data-username="{{ username }}">
    <h1 class="font-casino text-4xl text-center text-neon-gold text-glow-gold mb-6 tracking-wider">ROULETTE</h1>

    <div class="game-area">
        <div class="bet-controls" id="bet-controls">
            <div class="bet-controls-balance">
                <div class="label">Balance</div>
                <div class="amount">$<span id="balance">{{ balance }}</span></div>
            </div>
            <div class="quick-buttons">
                <button class="quick-btn clear" data-bet-set="0">CLR</button>
                <button class="quick-btn add" data-bet-add="10">+10</button>
                <button class="quick-btn add" data-bet-add="100">+100</button>
                <button class="quick-btn add" data-bet-add="1000">+1K</button>
                <button class="quick-btn add" data-bet-add="10000">+10K</button>
                <button class="quick-btn modify" data-bet-multiply="0.5">1/2</button>
                <button class="quick-btn modify" data-bet-multiply="2">2X</button>
                <button class="quick-btn allin" data-bet-allin>MAX</button>
            </div>
            <div class="bet-amount-display">
                <input type="text" id="bet-amount-input" placeholder="0" inputmode="numeric">
            </div>
        </div>

        <div class="wheel-section">
            <div class="wheel-container">
                <div class="wheel-pointer"></div>
                <div class="wheel" id="wheel">
                    <canvas id="wheel-canvas" width="400" height="400"></canvas>
                </div>
            </div>
            <div class="result-display" id="result-display"></div>
        </div>

        <div class="history-panel">
            <div class="timer" id="timer">-</div>
            <div class="current-winner">
                <div class="label">Winner</div>
                <div class="color-display none" id="winner-display"></div>
                <div class="color-name" id="winner-name">?</div>
            </div>
            <div class="history-list">
                <div class="history-list-title">History</div>
                <div class="history-items" id="history-items">
                    <span class="history-empty">No history yet</span>
                </div>
            </div>
            <div class="round-info">
                Round: <span id="round-number">-</span>
            </div>
        </div>
    </div>

    <div class="betting-section" id="betting-section">
        <div class="color-bet-tile gray" data-color="GRAY">
            <div class="tile-header">
                <div class="color-name">GRAY</div>
                <div class="multiplier">2x</div>
            </div>
            <div class="current-bet" id="current-bet-GRAY">Your bet: -</div>
            <button class="bet-button" data-place-bet="GRAY">BET</button>
            <div class="tile-separator"></div>
            <div class="tile-total-bets" id="total-bets-GRAY">Total: $0</div>
            <div class="tile-bets-list" id="bets-list-GRAY">
                <div class="tile-bets-empty">No bets yet</div>
            </div>
        </div>

        <div class="color-bet-tile red" data-color="RED">
            <div class="tile-header">
                <div class="color-name">RED</div>
                <div class="multiplier">3x</div>
            </div>
            <div class="current-bet" id="current-bet-RED">Your bet: -</div>
            <button class="bet-button" data-place-bet="RED">BET</button>
            <div class="tile-separator"></div>
            <div class="tile-total-bets" id="total-bets-RED">Total: $0</div>
            <div class="tile-bets-list" id="bets-list-RED">
                <div class="tile-bets-empty">No bets yet</div>
            </div>
        </div>

        <div class="color-bet-tile blue" data-color="BLUE">
            <div class="tile-header">
                <div class="color-name">BLUE</div>
                <div class="multiplier">5x</div>
            </div>
            <div class="current-bet" id="current-bet-BLUE">Your bet: -</div>
            <button class="bet-button" data-place-bet="BLUE">BET</button>
            <div class="tile-separator"></div>
            <div class="tile-total-bets" id="total-bets-BLUE">Total: $0</div>
            <div class="tile-bets-list" id="bets-list-BLUE">
                <div class="tile-bets-empty">No bets yet</div>
            </div>
        </div>

        <div class="color-bet-tile gold" data-color="GOLD">
            <div class="tile-header">
                <div class="color-name">GOLD</div>
                <div class="multiplier">50x</div>
            </div>
            <div class="current-bet" id="current-bet-GOLD">Your bet: -</div>
            <button class="bet-button" data-place-bet="GOLD">BET</button>
            <div class="tile-separator"></div>
            <div class="tile-total-bets" id="total-bets-GOLD">Total: $0</div>
            <div class="tile-bets-list" id="bets-list-GOLD">
                <div class="tile-bets-empty">No bets yet</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'js/utils.js' %}"></script>
<script src="{% static 'js/roulette.js' %}"></script>
{% endblock %}
